import{r as $,$ as ce,_ as de,av as ue,aw as he,j as t,T as d,B as D,X as pe}from"./index-AD2Xt7AV.js";import{T as ge,a as me,e as fe,c as Q,d as C,b as be}from"./TableRow-BNGT_3ZY.js";import{B as xe}from"./Button-BEGfdYZ5.js";var ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"},ye=function(h,R){return $.createElement(ce,de({},h,{ref:R,icon:ve}))},we=$.forwardRef(ye),ne={exports:{}};(function(B,h){(function(R,F){B.exports=F($)})(typeof self<"u"?self:ue,function(R){return function(){var F={155:function(e){e.exports=R}},z={};function x(e){var n=z[e];if(n!==void 0)return n.exports;var r=z[e]={exports:{}};return F[e](r,r.exports,x),r.exports}x.d=function(e,n){for(var r in n)x.o(n,r)&&!x.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},x.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},x.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var A={};x.r(A),x.d(A,{useReactToPrint:function(){return ie}});var oe=x(155);function p({level:e="error",messages:n,suppressErrors:r=!1}){r||(e==="error"?console.error(n):e==="warning"?console.warn(n):e==="debug"&&console.debug(n))}function G(e,n){if(n||!e){const r=document.getElementById("printWindow");r&&document.body.removeChild(r)}}function J(e,n){const{documentTitle:r,onAfterPrint:a,onPrintError:v,preserveAfterPrint:g,print:P,suppressErrors:m}=n;setTimeout(()=>{var w,j;if(e.contentWindow)if(e.contentWindow.focus(),P)P(e).then(()=>a==null?void 0:a()).then(()=>G(g)).catch(E=>{v?v("print",E):p({messages:["An error was thrown by the specified `print` function"],suppressErrors:m})});else{if(e.contentWindow.print){const E=(j=(w=e.contentDocument)===null||w===void 0?void 0:w.title)!==null&&j!==void 0?j:"",_=e.ownerDocument.title;r&&(e.ownerDocument.title=r,e.contentDocument&&(e.contentDocument.title=r)),e.contentWindow.print(),r&&(e.ownerDocument.title=_,e.contentDocument&&(e.contentDocument.title=E))}else p({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:m});a==null||a(),G(g)}else p({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:m})},500)}function X(e){const n=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);let a=r.nextNode();for(;a;)n.push(a),a=r.nextNode();return n}function K(e,n,r){const a=X(e),v=X(n);if(a.length===v.length)for(let g=0;g<a.length;g++){const P=a[g],m=v[g],w=P.shadowRoot;if(w!==null){const j=m.attachShadow({mode:w.mode});j.innerHTML=w.innerHTML,K(w,j,r)}}else p({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",e,n],suppressErrors:r})}const re=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function se(e,n,r,a){var v,g,P;const{contentNode:m,clonedContentNode:w,clonedImgNodes:j,clonedVideoNodes:E,numResourcesToLoad:_,originalCanvasNodes:M}=r,{bodyClass:W,fonts:H,ignoreGlobalStyles:U,pageStyle:L,nonce:T,suppressErrors:I,copyShadowRoots:O}=a;e.onload=null;const c=e.contentDocument||((v=e.contentWindow)===null||v===void 0?void 0:v.document);if(c){const q=c.body.appendChild(w);O&&K(m,q,!!I),H&&(!((g=e.contentDocument)===null||g===void 0)&&g.fonts&&(!((P=e.contentWindow)===null||P===void 0)&&P.FontFace)?H.forEach(s=>{const o=new FontFace(s.family,s.source,{weight:s.weight,style:s.style});e.contentDocument.fonts.add(o),o.loaded.then(()=>{n(o)}).catch(f=>{n(o,["Failed loading the font:",o,"Load error:",f])})}):(H.forEach(s=>n(s)),p({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:I})));const l=L??re,S=c.createElement("style");T&&(S.setAttribute("nonce",T),c.head.setAttribute("nonce",T)),S.appendChild(c.createTextNode(l)),c.head.appendChild(S),W&&c.body.classList.add(...W.split(" "));const Y=c.querySelectorAll("canvas");for(let s=0;s<M.length;++s){const o=M[s],f=Y[s];if(f===void 0){p({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",o],suppressErrors:I});continue}const i=f.getContext("2d");i&&i.drawImage(o,0,0)}for(let s=0;s<j.length;s++){const o=j[s],f=o.getAttribute("src");if(f){const i=new Image;i.onload=()=>n(o),i.onerror=(u,y,N,b,k)=>n(o,["Error loading <img>",o,"Error",k]),i.src=f}else n(o,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',o])}for(let s=0;s<E.length;s++){const o=E[s];o.preload="auto";const f=o.getAttribute("poster");if(f){const i=new Image;i.onload=()=>n(o),i.onerror=(u,y,N,b,k)=>n(o,["Error loading video poster",f,"for video",o,"Error:",k]),i.src=f}else o.readyState>=2?n(o):(o.onloadeddata=()=>n(o),o.onerror=(i,u,y,N,b)=>n(o,["Error loading video",o,"Error",b]),o.onstalled=()=>n(o,["Loading video stalled, skipping",o]))}const ee="select",te=m.querySelectorAll(ee),le=c.querySelectorAll(ee);for(let s=0;s<te.length;s++)le[s].value=te[s].value;if(!U){const s=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let o=0,f=s.length;o<f;++o){const i=s[o];if(i.tagName.toLowerCase()==="style"){const u=c.createElement(i.tagName),y=i.sheet;if(y){let N="";try{const b=y.cssRules.length;for(let k=0;k<b;++k)typeof y.cssRules[k].cssText=="string"&&(N+=`${y.cssRules[k].cssText}\r
`)}catch(b){p({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",i,`Original error: ${b==null?void 0:b.message}`],level:"warning"})}u.setAttribute("id",`react-to-print-${o}`),T&&u.setAttribute("nonce",T),u.appendChild(c.createTextNode(N)),c.head.appendChild(u)}}else if(i.getAttribute("href"))if(i.hasAttribute("disabled"))p({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",i],level:"warning"}),n(i);else{const u=c.createElement(i.tagName);for(let y=0,N=i.attributes.length;y<N;++y){const b=i.attributes[y];b&&u.setAttribute(b.nodeName,b.nodeValue||"")}u.onload=()=>n(u),u.onerror=(y,N,b,k,ae)=>n(u,["Failed to load",u,"Error:",ae]),T&&u.setAttribute("nonce",T),c.head.appendChild(u)}else p({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",i],level:"warning"}),n(i)}}}_===0&&J(e,a)}function Z(e,n,r,a){e.onload=()=>se(e,n,r,a),document.body.appendChild(e)}function ie(e){const{contentRef:n,fonts:r,ignoreGlobalStyles:a,onBeforePrint:v,onPrintError:g,preserveAfterPrint:P,suppressErrors:m}=e;return(0,oe.useCallback)(j=>{G(P,!0);const E=function({contentRef:l,optionalContent:S,suppressErrors:Y}){return S&&(l&&p({level:"warning",messages:['"react-to-print" received a `contentRef` option and a optional-content param passed to its callback. The `contentRef` option will be ignored.']}),typeof S=="function")?S():l?l.current:void p({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:Y})}({contentRef:n,optionalContent:j,suppressErrors:m});if(!E)return void p({messages:["There is nothing to print"],suppressErrors:m});const _=E.cloneNode(!0),M=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),W=_.querySelectorAll("img"),H=_.querySelectorAll("video"),U=r?r.length:0,L=(a?0:M.length)+W.length+H.length+U,T=[],I=[],O=function(){const l=document.createElement("iframe");return l.width=`${document.documentElement.clientWidth}px`,l.height=`${document.documentElement.clientHeight}px`,l.style.position="absolute",l.style.top=`-${document.documentElement.clientHeight+100}px`,l.style.left=`-${document.documentElement.clientWidth+100}px`,l.id="printWindow",l.srcdoc="<!DOCTYPE html>",l}(),c=(l,S)=>{T.includes(l)?p({level:"debug",messages:["Tried to mark a resource that has already been handled",l],suppressErrors:m}):(S?(p({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...S],suppressErrors:m}),I.push(l)):T.push(l),T.length+I.length===L&&J(O,e))},q={contentNode:E,clonedContentNode:_,clonedImgNodes:W,clonedVideoNodes:H,numResourcesToLoad:L,originalCanvasNodes:E.querySelectorAll("canvas")};v?v().then(()=>Z(O,c,q,e)).catch(l=>{g==null||g("onBeforePrint",l)}):Z(O,c,q,e)},[e])}return A}()})})(ne);var je=ne.exports;const V=({label:B,value:h})=>t.jsxs(D,{sx:{mt:0,mb:0},children:[t.jsx(d,{variant:"body2",children:B}),t.jsx(d,{variant:"body1",sx:{fontWeight:"bold"},children:h||"_________________"})]}),Pe=()=>{var x;const h=(x=he().state)==null?void 0:x.invoiceData,R=$.useRef(null),F=je.useReactToPrint({contentRef:R});return h?t.jsxs(D,{children:[t.jsxs(D,{ref:R,sx:{p:4},children:[t.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:4},children:[t.jsxs(D,{children:[t.jsx(d,{variant:"h4",gutterBottom:!0,children:"Halifax Glass and Aluminum Supply Inc."}),t.jsx(d,{children:"Saavedra Bldg., Times Beach, Matina Aplaya,"}),t.jsx(d,{children:"Davao City, Philippines"}),t.jsx(d,{children:"Phone: 0939 924 3876"}),t.jsx(d,{children:"Email: glasshalifax@gmail.com"})]}),t.jsxs(D,{sx:{textAlign:"right"},children:[t.jsx(d,{variant:"h5",gutterBottom:!0,children:h.salesType==="sales-invoice"?"Invoice":"Quotation"}),t.jsxs(d,{children:["Date: ",new Date(h.orderDate).toLocaleDateString()]}),t.jsxs(d,{children:["Delivery Date: ",new Date(h.deliveryDate).toLocaleDateString()]}),t.jsxs(d,{children:["Invoice #: ",h.invoiceNumber]}),t.jsxs(d,{children:["Cashier : ","John Doe"]})]})]}),t.jsxs(D,{sx:{mb:4},children:[t.jsx(d,{variant:"h6",gutterBottom:!0,children:"Bill To:"}),t.jsx(d,{children:h.customer.name}),t.jsx(d,{children:h.customer.address}),t.jsxs(d,{children:["Phone: ",h.customer.phone]})]}),t.jsx(ge,{component:pe,sx:{mb:4},children:t.jsxs(me,{children:[t.jsx(fe,{children:t.jsxs(Q,{children:[t.jsx(C,{children:"Product"}),t.jsx(C,{align:"right",children:"Price"}),t.jsx(C,{align:"right",children:"Quantity"}),t.jsx(C,{align:"right",children:"Subtotal"})]})}),t.jsxs(be,{children:[h.orderItems.map(A=>t.jsxs(Q,{children:[t.jsx(C,{children:A.name}),t.jsxs(C,{align:"right",children:["₱",A.price.toFixed(2)]}),t.jsx(C,{align:"right",children:A.quantity}),t.jsxs(C,{align:"right",children:["₱",(A.price*A.quantity).toFixed(2)]})]},A.id)),t.jsxs(Q,{children:[t.jsx(C,{colSpan:3,align:"right",children:t.jsx("strong",{children:"Total:"})}),t.jsx(C,{align:"right",children:t.jsxs("strong",{children:["₱",h.totalPrice.toFixed(2)]})})]})]})]})}),t.jsxs(D,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"end",gap:3},children:[t.jsx(V,{label:"Checked by"}),t.jsx(V,{label:"Released by"}),t.jsx(V,{label:"Delivered by"}),t.jsx(V,{label:"Received by"})]})]}),t.jsx(D,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:t.jsx(xe,{variant:"contained",startIcon:t.jsx(we,{}),onClick:F,children:"Print Invoice"})})]}):t.jsx(d,{children:"No invoice data available."})};export{Pe as default};
